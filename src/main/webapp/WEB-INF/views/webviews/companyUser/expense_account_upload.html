<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>发票上传</title>
<link rel="stylesheet" type="text/css"
	href="../../../css/webcss/bui.css">
<link rel="stylesheet" type="text/css"
	href="../../../css/webcss/golbal.css">
<link rel="stylesheet" type="text/css"
	href="../../../css/webcss/layout.css">
</head>
<body>
	<div class="wrap">
		<div class="side-bar">
			<div class="side-bar-top">
				<img src="/img/webimg/bss-logo.png">
				<h1>上海元升财务咨询有限公司</h1>
			</div>
			<div class="side-bar-content"></div>
			<div class="side-bar-bottom">
				<ul>
					<li><a href="#" id="btnTabFade"><i class="setting"></i>设置</a></li>
					<li><a href="/logout"><i class="exit"></i>安全退出</a></li>
				</ul>
			</div>
		</div>
		<div class="main">
			<div class="zero-state">
				<div class="form-window">
					<div class="hd">
						<i class="iconfont">&#xe627;</i>
					</div>
					<div class="bd">
						<h2>上传发票</h2>
						<p>
							这里您可以上传需要审核的发票
						</p>
						<form id="billUpload" action="/companyUser/uploadCompanyUserBill" method="POST"	enctype="multipart/form-data">
							<input type="file" id="billFile" name="files" class="ml10">
							<a href="javascript:uploadCompanyUserBill();" class="button button-success">拍照上传发票</a> <a href="javascript:uploadCompanyUserBill();"
							class="button button-success">扫描上传发票</a>
						</form>
					</div>
				</div>
			</div>
		</div>
		<div class="mt20">
           <div id="tabContent" class="hide">
		        <div id="tabDiv" class="mt10 clearfix layer-tabs">
		            <div class="tabs-menu">
		             </div>
		             <div class="tabs-box">
		            </div>
		        </div>
            </div>
        </div>
	</div>
	<!--该js需要修改js路径及修改seajs路径-->
	<script src="http://g.tbcdn.cn/fi/bui/jquery-1.8.1.min.js"></script>
	<script src="http://g.alicdn.com/bui/seajs/2.3.0/sea.js"></script>
	<script src="http://g.alicdn.com/bui/bui/1.1.17/config.js"></script>
	<script type="text/javascript">
		function uploadCompanyUserBill() {
			if($('#billFile').val() == null || $('#billFile').val() == '') {
				alert('请先选择文件再上传！');
				return;
			}
			$('#billUpload').submit();
		}
		//侧栏高度
        (function(){
            var H=$(window).height();
            var h1=$(".side-bar-top").height()+$(".side-bar-bottom").height();
            $(".side-bar-content").height(H-h1);
            $(window).resize(function(){
                H=$(window).height();
                $(".side-bar-content").height(H-h1);
            });
        })()
		//竖状菜单
	    BUI.use('bui/tree',function (Tree) {
	        var menu = new Tree.TreeMenu({
	        render : '.side-bar-content',

	        elCls : 'bui-side-menu', 
	        itemCls : 'bui-menu-item',
	        expandAnimate : true,
	        showIcons : false,

	        dirTpl : '<li class="menu-leaf menu-second"><div class="bui-menu-title"><s></s><span class="bui-menu-title-text"><a href="{href}">{text}</a></span></div></li>',
	        leafTpl : '<li class="menu-leaf"><a href="{href}">{text}</a></li>',

	        nodes : [
	  				{text : '发票上传',id : '',href:"#", leaf:true, children: []},
	  				{text : '发票草稿箱',id : '',href:"#", leaf:true, children: []},
	  				{text : '新建报销单',id : '',href:"#", leaf:true, children: []},
	  				{text : '待审核报销单',id : '',href:"#", leaf:true, children: []},
	  				{text : '已审核报销单',id : '',href:"#", leaf:true, children: []},
	  				{text : '报销单历史',id : '',href:"#", leaf:true, children: []},
	  				{text : '审核发票',id : '',href:"#",  leaf:false, expanded : false,children: [
	  					{text : '待审核发票',id : '', href:"#"},
	  					{text : '已审核发票',id : '', href:"#"}                                                   
	  				]},
	  				
	  	            ]
	  	    	});
	   		menu.render();
			$.each($("li.menu-second"),function(){
				var that = $(this);
				if(that.next().hasClass("menu-second")){
					that.find("s").remove();
				}
			})
	        menu.on('itemclick',function(ev){
	            $('.log').text(ev.item.text);
	        }); 
	    });
		
        BUI.use('bui/tab',function(Tab){
            var tab = new Tab.Tab({
                render : '.tabs-menu',
                elCls : 'button-tabs',
                autoRender: true,
                children:[
                  {text:'标签一',value:'1'},
                  {text:'标签二',value:'2'},
                  {text:'标签三',value:'3'},
                  {text:'标签四',value:'4'},
                  {text:'标签五',value:'5'}
                ]
            });
            tab.on('selectedchange',function (ev) {
                var item = ev.item;
                $('.tabs-box').text(item.get('text') + ' ' + item.get('value'));
            });
            tab.setSelected(tab.getItemAt(0));
        });
        BUI.use(['bui/overlay','bui/form'],function(Overlay,Form){

	        var tabForm = new Form.Form({
				srcNode : '#tabDiv'
			}).render();

			var tabDialog = new Overlay.Dialog({
				// title:'标题',
				width:800,
				height:480,
				//配置DOM容器的编号
				contentId:'tabContent',
				success:function () {
					alert('确认');
					this.close();
				}
			});
	        $('#btnTabFade').on('click',function () {
	          var sender = $(this),
	            type = sender.text(),
	            effect = {
	              effect : type,
	              duration : 400// 
	              //callback : function(){} ,callback 回调函数
	            };
	 
				tabDialog.set('effect',effect);
				tabDialog.show();
				var tabPar=$("#tabDiv").parent();
				tabPar.prev().remove();
				tabPar.next().remove();
				tabPar.css({"padding":"0","margin-top":"-10px"});
				tabPar.parent().find(".bui-ext-close").css({
                    "left" : "0",
                    "top" : "420px",
                    "width" : "120px",
                    "height" : "60px",
                    "border-top" : "1px solid #212326",
                    "background-color":"#35383b"
                })
                tabPar.parent().find(".bui-ext-close-x").css({
                    "background":"none",
                })
                tabPar.parent().find(".x-icon").css({
                    "height":"60px",
                    "line-height":"60px",
                    "width":"120px",
                    "text-align":"center",
                    "color":"#fff",
                    "font-weight":"normal",
                    "font-size":"30px"
                })
	        });
	    });
	</script>
</body>
</html>