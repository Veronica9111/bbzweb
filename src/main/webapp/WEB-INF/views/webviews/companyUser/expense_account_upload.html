<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>上海元升财务咨询有限公司</title>
<link rel="stylesheet" type="text/css"
	href="../../../css/webcss/bui.css">
<link rel="stylesheet" type="text/css"
	href="../../../css/webcss/golbal.css">
<link rel="stylesheet" type="text/css"
	href="../../../css/webcss/layout.css">
</head>
<body>
	<div class="wrap">
		<div class="side-bar">
			<div class="side-bar-top">
				<img src="/img/webimg/bss-logo.png">
				<h1>上海元升财务咨询有限公司</h1>
			</div>
			<div class="side-bar-content" id="menuTree"></div>
			<div class="side-bar-bottom">
				<ul>
					<li><a href="javascript:void(0)" id="sysSettings"><i
							class="setting"></i>设置</a></li>
					<li><a href="/logout"><i class="exit"></i>安全退出</a></li>
				</ul>
			</div>
		</div>
		<div class="main">
			<div class="zero-state">
				<div class="form-window">
					<div class="hd">
						<i class="iconfont">&#xe627;</i>
					</div>
					<div class="bd">
						<h2>您可以在这里上传您的发票图片文件</h2>
						<p>请先选择文件，再点击上传按钮</p>
						<form id="billUpload" action="/companyUser/uploadCompanyUserBill"
							method="POST" enctype="multipart/form-data">
							<div id="fileInfo" style="height: 50px;" class="text-primary"></div>
							<a href="javascript:;" class="file button button-success">选择发票图片文件
								<input type="file" id="billFile" name="files">
							</a> <a href="javascript:uploadCompanyUserBill();"
								class="button button-success">上传发票图片文件</a>
						</form>
					</div>
				</div>
			</div>
		</div>

		<div id="contentTabs" class="hide">
			<div id="tabDiv" class="clearfix layer-tabs">
				<div id="tab" class="tabs-menu"></div>
				<div id="panel" class="tabs-box">
					<div class="layer-wrap layer-wrap-simple">
						<div class="layer-wrap-menu">邮箱密码修改</div>
						<div class="layer-wrap-content">
							<div class="bd">
								<p>
									<input class="input" placeholder="请输入常用邮箱">
								</p>
								<p>
									<a href="" class="button button-success">确定提交</a>
								</p>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

	</div>
	<!--该js需要修改js路径及修改seajs路径-->
	<script src="http://g.tbcdn.cn/fi/bui/jquery-1.8.1.min.js"></script>
	<script src="http://g.alicdn.com/bui/seajs/2.3.0/sea.js"></script>
	<script src="http://g.alicdn.com/bui/bui/1.1.17/config.js"></script>
	<script src="/js/webjs/menuTree.js"></script>
	<script type="text/javascript">
		function uploadCompanyUserBill() {
			if($('#billFile').val() == null || $('#billFile').val() == '') {
				BUI.use('bui/overlay',function(overlay){
					  function show () {
					    BUI.Message.Alert('请先选择需要上传的图片文件。',function(){
					    },'warning');
					  }
					  show();
					      
					});
				return;
			}
			$('#billUpload').submit();
		}
		$("#billFile").attr('onChange', $.browser.msie ? "$(this).data('onChange').apply(this)" : "")
		.change( function(){if(!$.browser.msie)$(this).data('onChange').apply(this)} )
		.data('onChange',function(){$("#fileInfo").html($("#billFile").val());});
		//侧栏高度
        (function(){
            var H=$(window).height();
            var h1=$(".side-bar-top").height()+$(".side-bar-bottom").height();
            $(".side-bar-content").height(H-h1);
            $(window).resize(function(){
                H=$(window).height();
                $(".side-bar-content").height(H-h1);
            });
        })()
		 //Tabs
        BUI.use(['bui/tab','bui/mask'],function(Tab){
            var tab = new Tab.TabPanel({
                render : '#tab',
                elCls : 'button-tabs',
                panelContainer : '#panel',
                panelTpl : '<div class="panel"><p>{title}:{value}</p></div>',
                autoRender: true,
                children:[
                    {title:'密码修改',value:'1',selected : true}
                ]
            });
            tab.setSelected(tab.getItemAt(0));
        });
        BUI.use(['bui/overlay','bui/form'],function(Overlay,Form){
            var tabForm = new Form.Form({
                srcNode : '#tabDiv'
            }).render();
            var tabDialog = new Overlay.Dialog({
                // title:'标题',
                width:720,
                //height:400,
                //配置DOM容器的编号
                contentId:'contentTabs',
                buttons:[],
                success:function () {
                    alert('确认');
                    this.close();
                }
            });
            $('#sysSettings').on('click',function () {
              var sender = $(this),
                type = sender.text(),
                effect = {
                  effect : type,
                  duration : 400// 
                  //callback : function(){} ,callback 回调函数
                };
                tabDialog.set('effect',effect);
                tabDialog.show();
                var tabPar=$("#tabDiv").parent();
                tabPar.prev().remove();
                tabPar.find(".bui-stdmod-footer").remove();
                tabPar.css({"padding":"0"});
                console.log(tabPar.parent().find(".bui-ext-close"));
                tabPar.parent().find(".bui-ext-close").css({
                    "left" : "0",
                    "top" : "420px",
                    "width" : "120px",
                    "height" : "60px",
                    "border-top" : "1px solid #212326",
                    "background-color":"#35383b"
                })
                tabPar.parent().find(".bui-ext-close-x").css({
                    "background":"none",
                })
                tabPar.parent().find(".x-icon").css({
                    "height":"60px",
                    "line-height":"60px",
                    "width":"120px",
                    "text-align":"center",
                    "color":"#fff",
                    "font-weight":"normal",
                    "font-size":"30px"
                })
                // icon css
                var icon=['<i class="iconfont">&#xe634;</i>','<i class="iconfont">&#xe634;</i>','<i class="iconfont">&#xe634;</i>','<i class="iconfont">&#xe634;</i>','<i class="iconfont">&#xe634;</i>','<i class="iconfont">&#xe634;</i>']
                var ul_list = $("#tabDiv").find(".tab-panel-inner").find("ul").find("li");
                $.each(ul_list,function(i){
                    $(this).append(icon[i]);
                })
            });
        });
        
      //竖状菜单
        BUI.use('bui/tree',function (Tree) {
            var menu = new Tree.TreeMenu({
            render : '.side-bar-content',

            elCls : 'bui-side-menu', 
            itemCls : 'bui-menu-item',
            expandAnimate : true,
            showIcons : false,

            dirTpl : '<li class="menu-leaf menu-second"><div class="bui-menu-title"><s></s><span class="bui-menu-title-text"><a href="{href}">{text}</a></span></div></li>',
            leafTpl : '<li class="menu-leaf"><a href="{href}">{text}</a></li>',

            nodes : [
   					{text : '发票上传',id : '10',href:"/views/webviews/companyUser/expense_account_upload.html"},
   					{text : '发票草稿箱',id : '20',href:"/views/webviews/companyUser/expense_account_draft.html"},
   					{text : '新建报销单',id : '30',href:"/views/webviews/companyUser/create_invoice.html"},
   					{text : '待审核报销单',id : '40',href:"/views/webviews/companyUser/user_wait_audit_invoice.html"},
   					{text : '已审核报销单',id : '50',href:"/views/webviews/companyUser/user_finish_audit_invoice.html"},
   					{text : '报销单历史',id : '60',href:"/views/webviews/companyUser/expense_account_history.html"},
   					{text : '审核发票',id : '70',href:"javascript:void(0);",  leaf:false, expanded : false,children: [
   						{text : '待审核发票',id : '71', href:"/views/webviews/companyUser/audit_invoice_need_process.html"},
   						{text : '已审核发票',id : '72', href:"/views/webviews/companyUser/audit_invoice_finished.html"}                                                  
   					]}
             ]
        	});
       		menu.render();
            $.each($("li.menu-second"),function(){
                var that = $(this);
                if(that.next().hasClass("menu-second")){
                    that.find("s").remove();
                }
            })
            menu.on('itemclick',function(ev){
                $('.log').text(ev.item.text);
            });
            var firstLeaf = menu.findNode('10'); //获取第一个叶子节点
            menu.setSelected(firstLeaf);
        });
	</script>
</body>
</html>