<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>基本资料</title>
    <link rel="stylesheet" type="text/css" href="/css/webcss/bui.css">
	<link rel="stylesheet" type="text/css" href="/css/webcss/golbal.css">
	<link rel="stylesheet" type="text/css" href="/css/webcss/layout.css">
</head>
<body>
	<div class="wrap">
		<div class="side-bar">
			<div class="side-bar-top">
				<img src="/img/webimg/bss-logo.png" >
				<h1>上海青智财务咨询有限公司</h1>
			</div>
            <div class="side-bar-content"></div>
			<div class="side-bar-bottom">
				<ul>
					<li><a href=""><i class="setting"></i>设置</a></li>
					<li><a href=""><i class="exit"></i>安全退出</a></li>
				</ul>
			</div>
		</div>
		<div class="main">
			<div class="zero-state">
				<div class="form-window">
					<form name="orgInfoSettings" id="orgInfoSettings" action="/company/orgInfoSettings" method="POST"	enctype="multipart/form-data">
					<div class="form-horizontal onlineTools">
						<div class="row-fluid show-grid mt10">
							<label class="control-label control-label-small">公司名称</label>
                            <div class="controls"><input type="text" id="companyName" name="companyName" class="input input-small"><input type="file" id="comFile" name="files" class="ml10"></div>
						</div>
						<div class="row-fluid show-grid mt10">
							<label class="control-label control-label-small">公司法人</label>
                            <div class="controls"><input type="text" id="corparation" name="corparation" class="input input-small"></div>
						</div>
						<div class="row-fluid show-grid mt10">
							<label class="control-label control-label-small">注册地址</label>
                            <div class="controls"><select class="input input-mini" id="province" name="province"></select><select class="input input-mini ml10" id="city" name="city"></select><select class="input input-mini ml10" id="area" name="area"></select><input type="text" id="addExtra" name="addExtra" class="input input-small ml10"></div>
						</div>
						<div class="row-fluid show-grid mt10">
							<label class="control-label control-label-small">组织代码证号</label>
                            <div class="controls"><input type="text" id="orgCode" name="orgCode" class="input input-small"><input type="file" id="orgFile" name="files" class="ml10"></div>
						</div>
						<div class="row-fluid show-grid mt10">
							<label class="control-label control-label-small">税务登记证号</label>
                            <div class="controls"><input type="text" id="taxCode" name="taxCode" class="input input-small"><input type="file" id="taxFile" name="files" class="ml10"></div>
						</div>
						<div class="row-fluid show-grid mt10">
							<label class="control-label control-label-small">开户行</label>
                            <div class="controls"><input type="text" id="bankName" name="bankName" class="input input-small"></div>
						</div>
						<div class="row-fluid show-grid mt10">
							<label class="control-label control-label-small">&nbsp;</label>
                            <div class="controls"><a class="button button-success" onclick="checkInput();">保存</a></div>
						</div>
					</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!--该js需要修改js路径及修改seajs路径-->
	<script src="http://g.tbcdn.cn/fi/bui/jquery-1.8.1.min.js"></script>
	<script src="http://g.alicdn.com/bui/seajs/2.3.0/sea.js"></script>
	<script src="http://g.alicdn.com/bui/bui/1.1.17/config.js"></script>
	<script type="text/javascript">
		addProvince($('#province'), $('#city'));
		$("#province").change(function(){
			$("#city").empty();
			addCity($('#city'), $('#province option:selected').val());
		});
		$("#city").change(function(){
			$("#area").empty();
			addArea($('#area'), $('#city option:selected').val());
		});
		function checkInput() {
			var companyName = $('#companyName').val();
			var corparation = $('#corparation').val();
			var province = $('#province').val();
			var city = $('#city').val();
			var area = $('#area').val();
			var addExtra = $('#addExtra').val();
			var orgCode = $('#orgCode').val();
			var taxCode = $('#taxCode').val();
			var bankName = $('#bankName').val();
			var comFile = $('#comFile').val();
			var orgFile = $('#orgFile').val();
			var taxFile = $('#taxFile').val();
			if(companyName == '' || corparation == '' ||
					province=='' || city == '' || area == '' ||
					addExtra == '' || orgCode == '' ||
					taxCode == '' || bankName == '' ||
					comFile == '' || orgFile == '' || taxFile == '') {
				alert('您的信息没有填写完整，请检查！');
			} else {
				$('#orgInfoSettings').submit();
			}
		}
		function addProvince(obj) {
			$.ajax({
				url : '/getAllProvinces',
				type : "POST",
				data : {},
				success : function(data) {
					$.each(data,function(name,value) {
						obj.append("<option value='"+name+"'>"+value+"</option>");
					});
					addCity($('#city'), $('#province option:selected').val());
				}
			});
		}

		function addCity(obj, provinceId) {
			obj.empty();
			$.ajax({
				url : '/getCities',
				type : "POST",
				data : {provinceId:provinceId},
				success : function(data) {
					$.each(data,function(name,value) {
						obj.append("<option value='"+name+"'>"+value+"</option>");
					});
					addArea($('#area'), $('#city option:selected').val());
				}
			});
		}

		function addArea(obj, cityId) {
			obj.empty();
			$.ajax({
				url : '/getAreas',
				type : "POST",
				data : {cityId:cityId},
				success : function(data) {
					$.each(data,function(name,value) {
						obj.append("<option value='"+name+"'>"+value+"</option>");
					});
				}
			});
		}
		//侧栏高度
        (function(){
            var H=$(window).height();
            var h1=$(".side-bar-top").height()+$(".side-bar-bottom").height();
            $(".side-bar-content").height(H-h1);
            $(window).resize(function(){
                H=$(window).height();
                $(".side-bar-content").height(H-h1);
            });
        })()
		//竖状菜单
	    BUI.use('bui/tree',function (Tree) {
	        var menu = new Tree.TreeMenu({
	        render : '.side-bar-content',

	        elCls : 'bui-side-menu', 
	        itemCls : 'bui-menu-item',
	        expandAnimate : true,
	        showIcons : false,

	        dirTpl : '<li class="menu-leaf menu-second"><div class="bui-menu-title"><s></s><span class="bui-menu-title-text"><a href="{href}">{text}</a></span></div></li>',
	        leafTpl : '<li class="menu-leaf"><a href="{href}">{text}</a></li>',

	        nodes : [
	  				{text : '发票',id : '',href:"#",leaf : true, children: [
	  					{text : '发票上传',id : '',href:"/views/webviews/company/expense_account_upload.html"},
	  					{text : '发票历史记录',id : '',href:"/views/webviews/company/expense_account_history.html"}                                                      
	  				]},
	  				{text : '银行对账单',id : '',href:"#",expanded : false,children: [
	  					{text : '上传对账单',id : '',href:"/views/webviews/company/bank_statement_upload.html"},
	  					{text : '对账单历史记录',id : '',href:"/views/webviews/company/bank_statement_history.html"}                                                       
	  				]},
	  	            {text : '工资社保',id : '',href:"#",expanded : false,children : [
	  					{text : '参数设置',id : '',href:"/views/webviews/company/salary_welfare_args_settings.html"},
	  					{text : '下载工资计算模板',id : '',href:"/views/webviews/company/salary_welfare_template_download.html"},
	  					{text : '上传本月工资',id : '',href:"/views/webviews/company/salary_welfare_upload.html"}
	  				]},
	  	            {text : '预约取发票',id : '',href:"#",leaf : false,children: [
	  					{text : '方式选择',id : '',href:"/views/webviews/company/take_expense_account_mode_select.html"}
	  				]},
	  	            {text : '组织架构',id : '',href:"#",expanded : false,children : [
	  	                {text : '基本信息设置',id : '',href:"/views/webviews/company/organization_information_settings.html"},
	  	                {text : '组织架构设置',id : '',href:"/views/webviews/company/organization_structure_settings.html"}
	  	            ]}
	  	            ]
	  	    	});
	   		menu.render();
			$.each($("li.menu-second"),function(){
				var that = $(this);
				if(that.next().hasClass("menu-second")){
					that.find("s").remove();
				}
			})
	        menu.on('itemclick',function(ev){
	            $('.log').text(ev.item.text);
	        }); 
	    });
        BUI.use(['bui/overlay','bui/form'],function(Overlay,Form){
            
			var form = new Form.Form({
				srcNode : '#form'
			}).render();

			var dialog = new Overlay.Dialog({
				title:'标题',
				width:500,
				height:320,
				//配置DOM容器的编号
				contentId:'content',
				success:function () {
					this.close();
				}
			});
			//dialog.show();
 
	        $('#btnGroup .button').on('click',function () {
	          var sender = $(this),
	            type = sender.text(),
	            effect = {
	              effect : type,
	              duration : 400// 
	              //callback : function(){} ,callback 回调函数
	            };
	 
	          dialog.set('effect',effect);
	          dialog.show();
	 
	        });
	    });
	</script>
</body>
</html>